<ion-content [fullscreen]="true" class="members-content">
    <div class="members-page">
        <!-- Section Member List View -->
        <div *ngIf="selectedSection">
            <div class="section-header">
                <button type="button" class="back-button" (click)="closeSection()">
                    <span class="material-icons">arrow_back</span>
                </button>
                <div class="section-header-title">{{ getSectionTitle() }}</div>
            </div>
            <app-member-list
                [title]="getSectionTitle()"
                [members]="getSectionMembers()"
                [variant]="selectedSection"
                (memberClick)="viewMember($event)"
            ></app-member-list>
        </div>

        <!-- Section Summary Cards -->
        <div class="section-cards-container" *ngIf="!selectedSection">
            <!-- Pending Renew Card -->
            <div class="section-summary-card" (click)="viewSection('renew')">
                <div class="card-icon renew-icon">
                    <span class="material-icons">autorenew</span>
                </div>
                <div class="card-content-container">
                    <div class="card-title">Pending Renew</div>
                    <span>Members: {{ getRenewMembers().length }}</span>
                </div>
            </div>

            <!-- Active Card -->
            <div class="section-summary-card" (click)="viewSection('active')">
                <div class="card-icon active-icon">
                    <span class="material-icons">check_circle</span>
                </div>
                <div class="card-content-container">
                    <div class="card-title">Active</div>
                    <span>Members: {{ getActiveMembers().length }}</span>
                </div>
            </div>

            <!-- Expired Card -->
            <div class="section-summary-card" (click)="viewSection('expired')">
                <div class="card-icon expired-icon">
                    <span class="material-icons">schedule</span>
                </div>
                <div class="card-content-container">
                    <div class="card-title">Expired</div>
                    <span>Members: {{ getExpiredMembers().length }}</span>
                </div>
            </div>

            <!-- All Member Card -->
            <div class="section-summary-card" (click)="viewSection('all')">
                <div class="card-icon all-icon">
                    <span class="material-icons">group</span>
                </div>
                <div class="card-content-container">
                    <div class="card-title">All Member</div>
                    <span>Members: {{ getAllMembers().length }}</span>
                </div>
            </div>
        </div>

        <!-- Notifications Section -->
        <div class="notifications-section" *ngIf="!selectedSection && notifications.length > 0">
            <div class="notifications-header">
                <div class="notifications-title">Notifications</div>
                <button type="button" class="notifications-more-button" (click)="viewAllNotifications()">
                    More
                </button>
            </div>
            <div class="notifications-list">
                <div class="notification-card" *ngFor="let notification of notifications">
                    <div class="notification-icon">
                        <span class="material-icons">notifications</span>
                    </div>
                    <div class="notification-content">
                        <div class="notification-tags">
                            <span class="tag tag-type">Renewal</span>
                        </div>
                        <div class="notification-title">{{ notification.title }}</div>
                        <div class="notification-message">{{ notification.message }}</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Empty State -->
        <app-no-data-found
            *ngIf="getAllMembers().length === 0"
            icon="person_add"
            title="No Members Found"
            message="Start by adding your first gym member"
            [showAction]="true"
            actionLabel="Add Member"
            actionIcon="add"
            (onActionClick)="addMember()">
        </app-no-data-found>

        <!-- Floating Action Button -->
        <button
            type="button"
            class="members-fab"
            (click)="addMember()">
            <span class="material-icons">add</span>
        </button>
    </div>
</ion-content>
