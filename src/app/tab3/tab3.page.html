<ion-content [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar class="backup-toolbar">
            <ion-title size="large">Settings</ion-title>
        </ion-toolbar>
    </ion-header>

    <div class="settings-page">
        <!-- Account -->
        <section class="settings-section">
            <ion-label class="section-heading">Account</ion-label>

            <div class="settings-card">
                <button type="button" class="settings-row">
                    <div class="row-icon avatar-icon">
                        <ion-icon name="person-circle"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">My Account</div>
                        <div class="row-subtitle">Name, address, phone, email</div>
                    </div>
                    <ion-icon name="chevron-forward" class="row-chevron"></ion-icon>
                </button>
            </div>
        </section>

        <!-- Notifications -->
        <section class="settings-section">
            <ion-label class="section-heading">Preferences</ion-label>

            <div class="settings-card">
                <div class="settings-row">
                    <div class="row-icon">
                        <ion-icon name="notifications-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Notifications</div>
                        <div class="row-subtitle">Receive important reminders and alerts</div>
                    </div>
                    <ion-toggle [(ngModel)]="notificationsEnabled" class="toggle-control"></ion-toggle>
                </div>
            </div>
        </section>

        <!-- Backups -->
        <section class="settings-section">
            <ion-label class="section-heading">Backups</ion-label>

            <div class="settings-card">
                <div class="settings-row">
                    <div class="row-icon">
                        <ion-icon name="cloud-done-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Enable Automatic Backup</div>
                        <div class="row-subtitle">Back up your data on a schedule</div>
                    </div>
                    <ion-toggle [(ngModel)]="backupSettings.isEnabled" (ionChange)="onBackupToggleChange()"
                        class="toggle-control"></ion-toggle>
                </div>

                <div class="settings-row nested" *ngIf="backupSettings.isEnabled">
                    <div class="row-main">
                        <div class="row-title small">Backup Frequency</div>
                    </div>
                    <ion-select interface="popover" class="select-control" [(ngModel)]="backupSettings.frequency"
                        (ionChange)="onFrequencyChange()" placeholder="Select">
                        <ion-select-option value="daily">Daily</ion-select-option>
                        <ion-select-option value="weekly">Weekly</ion-select-option>
                        <ion-select-option value="monthly">Monthly</ion-select-option>
                        <ion-select-option value="yearly">Yearly</ion-select-option>
                    </ion-select>
                </div>

                <button type="button" class="settings-row" (click)="createBackup()" [disabled]="isCreatingBackup">
                    <div class="row-icon">
                        <ion-icon name="cloud-upload-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Manual Backup</div>
                        <div class="row-subtitle">
                            {{ isCreatingBackup ? 'Creating backup…' : 'Create a backup file now' }}
                        </div>
                    </div>
                </button>

                <button type="button" class="settings-row" (click)="restoreBackup()" [disabled]="isRestoringBackup">
                    <div class="row-icon">
                        <ion-icon name="cloud-download-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Restore Backup</div>
                        <div class="row-subtitle">
                            {{ isRestoringBackup ? 'Restoring backup…' : 'Restore data from a backup file' }}
                        </div>
                    </div>
                </button>

                <button type="button" class="settings-row" (click)="exportData()">
                    <div class="row-icon">
                        <ion-icon name="download-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Export / Import Data</div>
                        <div class="row-subtitle">Export your data or import from file</div>
                    </div>
                </button>
            </div>
        </section>

        <!-- Membership Fee Plan -->
        <section class="settings-section">
            <ion-label class="section-heading">Membership Fee Plan</ion-label>

            <div class="settings-card">
                <div class="settings-row">
                    <div class="row-icon">
                        <ion-icon name="calendar-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Monthly Fee</div>
                        <div class="row-subtitle">Configure monthly membership fee</div>
                    </div>
                    <ion-icon name="chevron-forward" class="row-chevron"></ion-icon>
                </div>

                <div class="settings-row">
                    <div class="row-icon">
                        <ion-icon name="repeat-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Quarterly Fee</div>
                        <div class="row-subtitle">Configure quarterly membership fee</div>
                    </div>
                    <ion-icon name="chevron-forward" class="row-chevron"></ion-icon>
                </div>

                <div class="settings-row">
                    <div class="row-icon">
                        <ion-icon name="sparkles-outline"></ion-icon>
                    </div>
                    <div class="row-main">
                        <div class="row-title">Yearly Fee</div>
                        <div class="row-subtitle">Configure yearly membership fee</div>
                    </div>
                    <ion-icon name="chevron-forward" class="row-chevron"></ion-icon>
                </div>
            </div>
        </section>
    </div>
</ion-content>